## 1.什么是javascript的同源策略，为什么需要同源策略。  
### 解析：它是由Netscape提出的一个著名的安全策略，现在所有的可支持javascript的浏览器都会使用这个策略。意思是脚本只能读取和所属文档来源相同的窗口和文档的属性。假设现在没有同源策略，会发生什么事情呢？大家知道，JavaScript可以做很多东西，比如：读取/修改网页中某个值。你现在打开了浏览器，在一个tab窗口中打开了银行网站，在另外一个tab窗口中打开了一个恶意网站，而那个恶意网站挂了一个的专门修改银行信息的JavaScript，当你访问这个恶意网站并且执行它JavaScript时，你的银行页面就会被这个JavaScript修改，后果会当然可以想象！而同源策略就为了防止这种事情发生. 　
### 注意：脚本本身的来源并不作为判断是否同源的依据，而是将脚本所属文档的来源作为判断依据。
* > 判断脚本来源
        例如：文档A中通过script的src引用了一个外部脚本，这个脚本是google提供的，也是从google的主机上加载到文档A中的，那么这个脚本的所属文档是谁呢，答案是文档A。
* > 判断是否同源
        理解了脚本来源，接着理解怎么判断是否同源：如果两个文档在协议、主机以及载入文档的URL端口这三点中有一点不同，就认为他们不同源。  

### 同源策略固然在安全性上有了很大提高，但这种做法属于“宁可错杀三千，不可放过一个”。如果一个多域名站点需要在不同的子域之间共享属性，同源策略就会变得很烦人了。以下介绍三种实现“不严格的同源策略”的方法：  
 
* > 使用Document对象的domain属性
        默认情况下，属性domain存放的是载入文档的服务器的主机名。这一属性是可写的。
        如果两个窗口包含的脚本把domain设置为了相同的值，那么这两个窗口就不再受同源策略的约束，它们就可以相互读取对方的属性。
 
* > 跨域资源共享（Cross-Origin Resource Sharing） 
        这种方法用新的“Origin：”请求头和新的响应头“Access-Control-Allow-Origin”来扩展HTTP。
* > 跨文档消息（Cross-Document Messaging）
        允许来自一个文档的脚本可以传递文本消息到另一个文档里的脚本，不管来源是否相同。
        调用window对象的postMessage()方法，可以异步传递消息事件到窗口的文档里。这种方法仅仅是一种消息传递技术。